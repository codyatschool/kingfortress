/* @license
 * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)
 * Modified by Cody Mims
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */
var Chess=function(fa){function T(a){return Object.keys(l).find(function(b){return l[b]===a})}function ha(){f=Array(128);t={w:-1,b:-1};q="w";n={w:0,b:0};z=-1;y=0;C=1;D=[];v={};P(E())}function A(a){var b=a.split(/\s+/),c=b[0],e=0;if(!ia(a).valid)return!1;ha();for(a=0;a<c.length;a++){var d=c.charAt(a);if("/"===d)e+=8;else if(-1!=="0123456789".indexOf(d))e+=parseInt(d,10);else{var g="a">d?"w":"b";Q({type:d.toLowerCase(),color:g},x(e));e++}}q=b[1];-1<b[2].indexOf("K")&&(n.w|=h.KSIDE_CASTLE);-1<b[2].indexOf("Q")&&
(n.w|=h.QSIDE_CASTLE);-1<b[2].indexOf("k")&&(n.b|=h.KSIDE_CASTLE);-1<b[2].indexOf("q")&&(n.b|=h.QSIDE_CASTLE);z="-"===b[3]?-1:l[b[3]];y=parseInt(b[4],10);C=parseInt(b[5],10);P(E());return!0}function ia(a){var b={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",
6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"};a=a.split(/\s+/);if(6!==a.length)return{valid:!1,error_number:1,error:b[1]};if(isNaN(a[5])||0>=parseInt(a[5],10))return{valid:!1,error_number:2,error:b[2]};if(isNaN(a[4])||
0>parseInt(a[4],10))return{valid:!1,error_number:3,error:b[3]};if(!/^(-|[abcdefgh][36])$/.test(a[3]))return{valid:!1,error_number:4,error:b[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(a[2]))return{valid:!1,error_number:5,error:b[5]};if(!/^(w|b)$/.test(a[1]))return{valid:!1,error_number:6,error:b[6]};var c=a[0].split("/");if(8!==c.length)return{valid:!1,error_number:7,error:b[7]};for(var e=0;e<c.length;e++){for(var d=0,g=!1,k=0;k<c[e].length;k++)if(isNaN(c[e][k])){if(!/^[prnbqkPRNBQK]$/.test(c[e][k]))return{valid:!1,
error_number:9,error:b[9]};d+=1;g=!1}else{if(g)return{valid:!1,error_number:8,error:b[8]};d+=parseInt(c[e][k],10);g=!0}if(8!==d)return{valid:!1,error_number:10,error:b[10]}}return"3"==a[3][1]&&"w"==a[1]||"6"==a[3][1]&&"b"==a[1]?{valid:!1,error_number:11,error:b[11]}:{valid:!0,error_number:0,error:b[0]}}function E(){for(var a=0,b="",c=l.a8;c<=l.h1;c++){if(null==f[c])a++;else{0<a&&(b+=a,a=0);var e=f[c].type;b+="w"===f[c].color?e.toUpperCase():e.toLowerCase()}c+1&136&&(0<a&&(b+=a),c!==l.h1&&(b+="/"),
a=0,c+=8)}a="";n.w&h.KSIDE_CASTLE&&(a+="K");n.w&h.QSIDE_CASTLE&&(a+="Q");n.b&h.KSIDE_CASTLE&&(a+="k");n.b&h.QSIDE_CASTLE&&(a+="q");a=a||"-";c=-1===z?"-":x(z);return[b,q,a,c,y,C].join(" ")}function U(a){for(var b=0;b<a.length;b+=2)"string"===typeof a[b]&&"string"===typeof a[b+1]&&(v[a[b]]=a[b+1]);return v}function P(a){0<D.length||("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"!==a?(v.SetUp="1",v.FEN=a):(delete v.SetUp,delete v.FEN))}function ja(a){return(a=f[l[a]])?{type:a.type,color:a.color}:
null}function Q(a,b){if(!("type"in a&&"color"in a&&-1!=="pnbrqkwPNBRQKW".indexOf(a.type.toLowerCase())&&b in l))return!1;var c=l[b];if("k"==a.type&&-1!=t[a.color]&&t[a.color]!=c)return!1;f[c]={type:a.type,color:a.color};"k"===a.type&&(t[a.color]=c);P(E());return!0}function V(a){var b=ja(a);f[l[a]]=null;b&&"k"===b.type&&(t[b.color]=-1);P(E());return b}function ka(a,b,c,e,d){b={color:q,from:b,to:c,flags:e,piece:a[b].type};d&&(b.flags|=h.PROMOTION,b.promotion=d);a[c]?b.captured=a[c].type:e&h.EP_CAPTURE&&
(b.captured="p");return b}function H(a){function b(F,I,W,R,la){if("p"!==F[W].type||0!==R>>4&&7!==R>>4)I.push(ka(F,W,R,la));else for(var ma=["q","r","b","n"],X=0,ta=ma.length;X<ta;X++)I.push(ka(F,W,R,la,ma[X]))}var c=[],e=q,d=M(e),g=l.a8,k=l.h1,r=!1,u="undefined"!==typeof a&&"legal"in a?a.legal:!0;if("undefined"!==typeof a&&"square"in a)if(a.square in l)g=k=l[a.square],r=!0;else return[];for(a=g;a<=k;a++)if(a&136)a+=7;else{var p=f[a];if(null!=p&&p.color===e)if("p"===p.type){var m=a+Y[e][0];null==f[m]&&
(b(f,c,a,m,h.NORMAL),m=a+Y[e][1],null==f[m]&&b(f,c,a,m,h.BIG_PAWN));for(w=2;4>w;w++)m=a+Y[e][w],m&136||(null!=f[m]&&f[m].color===d?b(f,c,a,m,h.CAPTURE):m===z&&b(f,c,a,z,h.EP_CAPTURE))}else{var w=0;for(g=na[p.type].length;w<g;w++){var B=na[p.type][w];for(m=a;;){m+=B;if(m&136)break;if(null==f[m])b(f,c,a,m,h.NORMAL);else{if(f[m].color===e)break;b(f,c,a,m,h.CAPTURE);break}if("n"===p.type||"k"===p.type)break}}}}r&&k!==t[e]||(n[e]&h.KSIDE_CASTLE&&(k=t[e],r=k+2,null!=f[k+1]||null!=f[r]||J(d,t[e])||J(d,k+
1)||J(d,r)||b(f,c,t[e],r,h.KSIDE_CASTLE)),n[e]&h.QSIDE_CASTLE&&(k=t[e],r=k-2,null!=f[k-1]||null!=f[k-2]||null!=f[k-3]||J(d,t[e])||J(d,k-1)||J(d,r)||b(f,c,t[e],r,h.QSIDE_CASTLE)));if(!u)return c;d=[];a=0;for(g=c.length;a<g;a++)K(c[a]),L(e)||d.push(c[a]),O();return d}function oa(){function a(){if(!L(q))return A(b),!0;A(b);return!1}for(var b=E(),c=l.a8;c<=l.h1;c++)if(c&136)c+=7;else{var e=f[c];null!=e&&e.color===q&&("n"===e.type?specialMoves(T(c),f[c]).forEach(function(d){V(d);if(a())return!0}):"r"===
e.type?specialMoves(T(c),f[c]).forEach(function(d){Q({type:"w",color:q},d);if(a())return!0}):"k"===e.type&&specialMoves(T(c),f[c]).forEach(function(d){V(d);Q({type:"w",color:M(q)},d);if(a())return!0}))}return!1}function N(a,b){var c="";if(a.flags&h.KSIDE_CASTLE)c="O-O";else if(a.flags&h.QSIDE_CASTLE)c="O-O-O";else{var e=H({legal:!b});for(var d=a.from,g=a.to,k=a.piece,r=0,u=0,p=0,m=0,w=e.length;m<w;m++){var B=e[m].from,F=e[m].to;k===e[m].piece&&d!==B&&g===F&&(r++,d>>4===B>>4&&u++,(d&15)===(B&15)&&
p++)}e=0<r?0<u&&0<p?x(d):0<p?x(d).charAt(1):x(d).charAt(0):"";"p"!==a.piece&&(c+=a.piece.toUpperCase()+e);a.flags&(h.CAPTURE|h.EP_CAPTURE)&&("p"===a.piece&&(c+=x(a.from)[0]),c+="x");c+=x(a.to);a.flags&h.PROMOTION&&(c+="="+a.promotion.toUpperCase())}e=E();L(q)&&(c=Z()?c+"#":c+"+");A(e);return c}function aa(a){return a.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function J(a,b){for(var c=l.a8;c<=l.h1;c++)if(c&136)c+=7;else if(null!=f[c]&&f[c].color===a&&"w"!=f[c].type){var e=f[c],d=c-b,g=d+119;if(ua[g]&
1<<va[e.type])if("p"===e.type)if(0<d){if("w"===e.color)return!0}else{if("b"===e.color)return!0}else{if("n"===e.type||"k"===e.type)return!0;e=wa[g];d=c+e;for(g=!1;d!==b;){if(null!=f[d]){g=!0;break}d+=e}if(!g)return!0}}return!1}function L(a){return J(M(a),t[a])}function Z(){return L(q)&&0===H().length&&!oa()}function ba(){return!L(q)&&0===H().length&&!oa()}function ca(){for(var a={},b=[],c=0,e=0,d=l.a8;d<=l.h1;d++)if(e=(e+1)%2,d&136)d+=7;else{var g=f[d];g&&(a[g.type]=g.type in a?a[g.type]+1:1,"b"===
g.type&&b.push(e),c++)}if(2===c||3===c&&(1===a.b||1===a.n))return!0;if(c===a.b+2){a=0;c=b.length;for(d=0;d<c;d++)a+=b[d];if(0===a||a===c)return!0}return!1}function da(){var a={};pa.forEach(function(b){b=b.split(" ").slice(0,4).join(" ");a[b]=b in a?a[b]+1:1;if(3<=a[b])return!0});return!1}function K(a){var b=q,c=M(b);D.push({move:a,kings:{b:t.b,w:t.w},turn:q,castling:{b:n.b,w:n.w},ep_square:z,half_moves:y,move_number:C});f[a.to]=f[a.from];f[a.from]=null;a.flags&h.EP_CAPTURE&&("b"===q?f[a.to-16]=null:
f[a.to+16]=null);a.flags&h.PROMOTION&&(f[a.to]={type:a.promotion,color:b});if("k"===f[a.to].type){t[f[a.to].color]=a.to;if(a.flags&h.KSIDE_CASTLE){var e=a.to-1,d=a.to+1;f[e]=f[d];f[d]=null}else a.flags&h.QSIDE_CASTLE&&(e=a.to+1,d=a.to-2,f[e]=f[d],f[d]=null);n[b]=""}if(n[b])for(e=0,d=G[b].length;e<d;e++)if(a.from===G[b][e].square&&n[b]&G[b][e].flag){n[b]^=G[b][e].flag;break}if(n[c])for(e=0,d=G[c].length;e<d;e++)if(a.to===G[c][e].square&&n[c]&G[c][e].flag){n[c]^=G[c][e].flag;break}z=a.flags&h.BIG_PAWN?
"b"===q?a.to-16:a.to+16:-1;"p"===a.piece?y=0:a.flags&(h.CAPTURE|h.EP_CAPTURE)?y=0:y++;"b"===q&&C++;q=M(q)}function O(){var a=D.pop();if(null==a)return null;var b=a.move;t=a.kings;q=a.turn;n=a.castling;z=a.ep_square;y=a.half_moves;C=a.move_number;a=q;var c=M(q);f[b.from]=f[b.to];f[b.from].type=b.piece;f[b.to]=null;b.flags&h.CAPTURE?f[b.to]={type:b.captured,color:c}:b.flags&h.EP_CAPTURE&&(f["b"===a?b.to-16:b.to+16]={type:"p",color:c});if(b.flags&(h.KSIDE_CASTLE|h.QSIDE_CASTLE)){if(b.flags&h.KSIDE_CASTLE){var e=
b.to+1;var d=b.to-1}else b.flags&h.QSIDE_CASTLE&&(e=b.to-2,d=b.to+1);f[e]=f[d];f[d]=null}return b}function ea(a,b){var c=aa(a);if(b){var e=c.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(e)var d=e[1],g=e[2],k=e[3],r=e[4]}for(var u=H(),p=0,m=u.length;p<m;p++)if(c===aa(N(u[p]))||b&&c===aa(N(u[p],!0))||!(!e||d&&d.toLowerCase()!=u[p].piece||l[g]!=u[p].from||l[k]!=u[p].to||r&&r.toLowerCase()!=u[p].promotion))return u[p];return null}function x(a){var b=a&15;a>>=4;return"abcdefgh".substring(b,
b+1)+"87654321".substring(a,a+1)}function M(a){return"w"===a?"b":"w"}function S(a){a=qa(a);a.san=N(a,!1);a.to=x(a.to);a.from=x(a.from);var b="",c;for(c in h)h[c]&a.flags&&(b+=ra[c]);a.flags=b;return a}function qa(a){var b=a instanceof Array?[]:{},c;for(c in a)b[c]="object"===typeof c?qa(a[c]):a[c];return b}function sa(a){for(var b=H({legal:!1}),c=0,e=q,d=0,g=b.length;d<g;d++){K(b[d]);if(!L(e))if(0<a-1){var k=sa(a-1);c+=k}else c++;O()}return c}var xa=["1-0","0-1","1/2-1/2","*"],Y={b:[16,32,17,15],
w:[-16,-32,-17,-15]},na={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1],w:[]},ua=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,
24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],wa=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,
-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],va={p:0,n:1,b:2,r:3,q:4,k:5},ra={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},h={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},l={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,
g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},G={w:[{square:l.a1,flag:h.QSIDE_CASTLE},{square:l.h1,flag:h.KSIDE_CASTLE}],b:[{square:l.a8,flag:h.QSIDE_CASTLE},{square:l.h8,flag:h.KSIDE_CASTLE}]},
f=Array(128),t={w:-1,b:-1},q="w",n={w:0,b:0},z=-1,y=0,C=1,D=[],pa=[],v={};"undefined"===typeof fa?A("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"):A(fa);return{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",WALL:"w",SQUARES:function(){for(var a=[],b=l.a8;b<=l.h1;b++)b&136?b+=7:a.push(x(b));return a}(),FLAGS:ra,load:function(a){return A(a)},reset:function(){A("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")},moves:function(a){for(var b=H(a),c=
[],e=0,d=b.length;e<d;e++)"undefined"!==typeof a&&"verbose"in a&&a.verbose?c.push(S(b[e])):c.push(N(b[e],!1));return c},in_check:function(){return L(q)},in_checkmate:function(){return Z()},in_stalemate:function(){return ba()},in_draw:function(){return 100<=y||ba()||ca()||da()},insufficient_material:function(){return ca()},in_threefold_repetition:function(){return da()},game_over:function(){return 100<=y||Z()||ba()||ca()||da()},validate_fen:function(a){return ia(a)},fen:function(){return E()},board:function(){for(var a=
[],b=[],c=l.a8;c<=l.h1;c++)null==f[c]?b.push(null):b.push({type:f[c].type,color:f[c].color}),c+1&136&&(a.push(b),b=[],c+=8);return a},pgn:function(a){var b="object"===typeof a&&"string"===typeof a.newline_char?a.newline_char:"\n";a="object"===typeof a&&"number"===typeof a.max_width?a.max_width:0;var c=[],e=!1,d;for(d in v)c.push("["+d+' "'+v[d]+'"]'+b),e=!0;e&&D.length&&c.push(b);for(d=[];0<D.length;)d.push(O());e=[];for(var g="";0<d.length;){var k=d.pop();D.length||"b"!==k.color?"w"===k.color&&(g.length&&
e.push(g),g=C+"."):g=C+". ...";g=g+" "+N(k,!1);K(k)}g.length&&e.push(g);"undefined"!==typeof v.Result&&e.push(v.Result);if(0===a)return c.join("")+e.join(" ");for(d=g=0;d<e.length;d++)g+e[d].length>a&&0!==d?(" "===c[c.length-1]&&c.pop(),c.push(b),g=0):0!==d&&(c.push(" "),g++),c.push(e[d]),g+=e[d].length;return c.join("")},load_pgn:function(a,b){function c(u){for(var p in u)return!0;return!1}var e="undefined"!==typeof b&&"sloppy"in b?b.sloppy:!1,d="object"===typeof b&&"string"===typeof b.newline_char?
b.newline_char:"\r?\n",g=a.replace(new RegExp("^(\\[(.|"+d+")*\\])("+d+")*1.("+d+"|.)*$","g"),"$1");"["!==g[0]&&(g="");A("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");var k=function(u,p){for(var m={},w=u.split(new RegExp("object"===typeof p&&"string"===typeof p.newline_char?p.newline_char:"\r?\n")),B,F,I=0;I<w.length;I++)B=w[I].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),F=w[I].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),0<B.replace(/^\s+|\s+$/g,"").length&&(m[B]=F);return m}(g,b),r;for(r in k)U([r,
k[r]]);if("1"===k.SetUp&&!("FEN"in k&&A(k.FEN)))return!1;d=a.replace(g,"").replace(new RegExp(d,"g")," ");d=d.replace(/(\{[^}]+\})+?/g,"");for(g=/(\([^\(\)]+\))+?/g;g.test(d);)d=d.replace(g,"");d=d.replace(/\d+\.(\.\.)?/g,"");d=d.replace(/\.\.\./g,"");d=d.replace(/\$\d+/g,"");d=d.replace(/^\s+|\s+$/g,"").split(new RegExp(/\s+/));d=d.join(",").replace(/,,+/g,",").split(",");g="";for(k=0;k<d.length-1;k++){g=ea(d[k],e);if(null==g)return!1;K(g)}g=d[d.length-1];if(-1<xa.indexOf(g))c(v)&&"undefined"===
typeof v.Result&&U(["Result",g]);else{g=ea(g,e);if(null==g)return!1;K(g)}return!0},header:function(){return U(arguments)},ascii:function(){for(var a="   +------------------------+\n",b=l.a8;b<=l.h1;b++){0===(b&15)&&(a+=" "+"87654321"[b>>4]+" |");if(null==f[b])a+=" . ";else{var c=f[b].type;c="w"===f[b].color?c.toUpperCase():c.toLowerCase();a+=" "+c+" "}b+1&136&&(a+="|\n",b+=8)}return a+"   +------------------------+\n     a  b  c  d  e  f  g  h\n"},turn:function(){return q},move:function(a,b){var c=
"undefined"!==typeof b&&"sloppy"in b?b.sloppy:!1,e=null;if("string"===typeof a)e=ea(a,c);else if("object"===typeof a){c=H();for(var d=0,g=c.length;d<g;d++)if(!(a.from!==x(c[d].from)||a.to!==x(c[d].to)||"promotion"in c[d]&&a.promotion!==c[d].promotion)){e=c[d];break}}if(!e)return null;c=S(e);K(e);return c},undo:function(){var a=O();return a?S(a):null},clear:function(){return ha()},put:function(a,b){return Q(a,b)},get:function(a){return ja(a)},remove:function(a){return V(a)},perft:function(a){return sa(a)},
square_color:function(a){return a in l?(a=l[a],0===((a>>4)+(a&15))%2?"light":"dark"):null},history:function(a){var b=[],c=[];a="undefined"!==typeof a&&"verbose"in a&&a.verbose;for(;0<D.length;)b.push(O());for(;0<b.length;){var e=b.pop();a?c.push(S(e)):c.push(N(e));K(e)}return c},log_move:function(){pa.push(E())}}};"undefined"!==typeof exports&&(exports.Chess=Chess);"undefined"!==typeof define&&define(function(){return Chess});